CREATE DATABASE wmsdb;

use wmsdb;

CREATE TABLE `user` (
	`client_id`	VARCHAR(255)	NOT NULL,
	`user_name`	VARCHAR(20)	NOT NULL,
	`user_phone`	VARCHAR(15)	NOT NULL	COMMENT '하이픈 없는형태 + 국제번호',
	`user_email`	VARCHAR(30)(	NOT NULL,
	`user_adress`	VARCHAR(30)	NOT NULL,
	`business_number`	INT	NOT NULL,
	`user_enterday`	DATE	NOT NULL	COMMENT '회원가입 승인이 된 날짜 기준',
	`user_id`	VARCHAR(15)	NOT NULL,
	`user_pw`	VARCHAR(15)	NOT NULL,
	`user_status`	TINYINT(1)	NOT NULL	COMMENT '미승인/승인으로 나뉜다',
	`user_ware_size`	decimal(10,2)	NULL,
	`user_ware_use`	decimal(10,2)	NULL
);

CREATE TABLE `admin` (
	`admin_number`	VARCHAR(255)	NOT NULL,
	`admin_role`	VARCHAR(10)	NOT NULL	COMMENT '총관리자,창고관리자',
	`admin_name`	VARCHAR(20)	NOT NULL,
	`admin_email`	VARCHAR(30)	NOT NULL,
	`admin_enterday`	VARCHAR(30)	NOT NULL	COMMENT '관리자 입사일',
	`admin_adress`	VARCHAR(30)	NULL,
	`admin_phone`	VARCHAR(15)	NOT NULL,
	`admin_id`	VARCHAR(15)	NOT NULL	COMMENT '관리자 로그인 ID',
	`admin_pw`	VARCHAR(15)	NOT NULL	COMMENT '관리자 로그인 PW'
);

CREATE TABLE `outbound` (
	`Key`	VARCHAR(30)	NOT NULL,
	`prod_id`	VARCHAR(10)	NOT NULL,
	`client_id`	VARCHAR(10)	NOT NULL,
	`quantity`	INT	NOT NULL,
	`status`	INT	NOT NULL	DEFAULT 0,
	`req_outbound_day`	DATE	NULL,
	`ware_id`	VARCHAR(10)	NOT NULL
);

CREATE TABLE `inventory` (
	`prod_id`	VARCHAR(10)	NOT NULL,
	`client_id`	varchar(10)	NOT NULL,
	`quantity`	INT	NOT NULL	DEFAULT 0,
	`ware_id`	VARCHAR(10)	NOT NULL,
	`prod_id2`	VARCHAR(10)	NOT NULL	COMMENT '카테고리 + 생산년도 + 4자리 일련번호'
);

CREATE TABLE `product` (
	`prod_id`	VARCHAR(10)	NOT NULL	COMMENT '카테고리 + 생산년도 + 4자리 일련번호',
	`brand`	VARHCAR(20)	NOT NULL,
	`prod_name`	VARCHAR(30)	NOT NULL,
	`prod_price`	INTEGER	NULL,
	`prod_code`	INTEGER	NULL,
	`prod_category`	VARCHAR(20)	NOT NULL	COMMENT 'ex) CPU,VGA,RAM,MainBoard',
	`prod_size`	DECIMAL(10,2)	NOT NULL	COMMENT 'cm^3 단위'
);

CREATE TABLE `warehouse_area` (
	`ware_id`	VARCHAR(10)	NOT NULL,
	`ware_name`	VARCHAR(20)	NOT NULL,
	`ware_location`	VARCHAR(10)	NOT NULL,
	`ware_size`	INT	NOT NULL	DEFAULT 0
);

CREATE TABLE `inbound` (
	`inbound_number`	VARCHAR(30)	NOT NULL,
	`prod_id`	VARCHAR(10)	NOT NULL,
	`client_id`	VARCHAR(10)	NOT NULL,
	`quantity`	INT	NOT NULL,
	`Inboud_status`	INT	NOT NULL	DEFAULT 0,
	`req_inbound_day`	DATE	NULL,
	`ware_id`	VARCHAR(10)	NOT NULL
);

CREATE TABLE `warehouse` (
	`ware_id`	VARCHAR(10)	NOT NULL,
	`client_id`	varchar(10)	NOT NULL,
	`prod_id`	VARCHAR(10)	NOT NULL,
	`quantity`	INT	NOT NULL	DEFAULT 0,
	`last_inbound_day`	DATE	NOT NULL,
	`last_outbount_day`	DATE	NULL
);

ALTER TABLE `user` ADD CONSTRAINT `PK_USER` PRIMARY KEY (
	`client_id`
);

ALTER TABLE `admin` ADD CONSTRAINT `PK_ADMIN` PRIMARY KEY (
	`admin_number`
);

ALTER TABLE `outbound` ADD CONSTRAINT `PK_OUTBOUND` PRIMARY KEY (
	`Key`,
	`prod_id`
);

ALTER TABLE `inventory` ADD CONSTRAINT `PK_INVENTORY` PRIMARY KEY (
	`prod_id`
);

ALTER TABLE `product` ADD CONSTRAINT `PK_PRODUCT` PRIMARY KEY (
	`prod_id`
);

ALTER TABLE `warehouse_area` ADD CONSTRAINT `PK_WAREHOUSE_AREA` PRIMARY KEY (
	`ware_id`
);

ALTER TABLE `inbound` ADD CONSTRAINT `PK_INBOUND` PRIMARY KEY (
	`inbound_number`,
	`prod_id`
);

ALTER TABLE `warehouse` ADD CONSTRAINT `PK_WAREHOUSE` PRIMARY KEY (
	`ware_id`
);

ALTER TABLE `outbound` ADD CONSTRAINT `FK_product_TO_outbound_1` FOREIGN KEY (
	`prod_id`
)
REFERENCES `product` (
	`prod_id`
);

ALTER TABLE `inbound` ADD CONSTRAINT `FK_product_TO_inbound_1` FOREIGN KEY (
	`prod_id`
)
REFERENCES `product` (
	`prod_id`
);

ALTER TABLE `warehouse` ADD CONSTRAINT `FK_warehouse_area_TO_warehouse_1` FOREIGN KEY (
	`ware_id`
)
REFERENCES `warehouse_area` (
	`ware_id`
);

